<%= form_for [:transactions, @indent] do |f| %>
  <%= render "shared/error_messages", resource: @indent %>

  <div class="form-row">
    <div class="form-group col-sm-12 col-lg-3">
      <%= f.label :company_id %>
      <%= f.select :company_id, current_organization.companies.order_by_name.pluck(:name, :id), { prompt: "-- Select Company --" }, { required: true, class: "form-control" } %>
    </div>

    <div class="form-group col-sm-12 col-lg-3">
      <%= f.label :warehouse_id %>
      <%= f.select :warehouse_id, warehouse_options(f.object), { prompt: "-- Select Warehouse --" }, { required: true, class: "form-control" } %>
    </div>

    <div class="form-group col-sm-12 col-lg-3">
      <%= f.label :requirement_date %>
      <%= f.text_field :requirement_date, value: I18n.l(f.object.requirement_date, default: ""), required: true, class: "form-control" %>
    </div>
  </div>

  <hr>

  <%= f.fields_for :indent_items do |builder| %>
    <%= render "indent_item_fields", f: builder %>
  <% end %>

  <%= link_to_add_fields f, :indent_items %>

  <div class="form-group mt-3">
    <%= f.submit yield(:button_title), class: "btn btn-primary btn-xs-block", data: { disable_with: "Saving..." } %>
  </div>
<% end %>

<script>
  $('#indent_requirement_date').daterangepicker({
    autoUpdateInput: false,
    singleDatePicker: true,
    locale: {
      format: 'DD/MM/YYYY',
      cancelLabel: 'Clear'
    }
  });

  $('#indent_requirement_date').on('apply.daterangepicker', function (ev, picker) {
    $(this).val(picker.startDate.format('DD/MM/YYYY'));
  });

  $('#indent_requirement_date').on('cancel.daterangepicker', function (ev, picker) {
    $(this).val('');
  });
</script>
