<% provide(:title, "Companies") %>
<% provide(:page_title, "Companies") %>

<section class="mb-4 d-flex justify-content-between">
  <section>
    <%= new_link_using_modal(controller_name) %>
    <%= filter_button(params[:q]) %>
  </section>

  <section>
    <%= excel_export_btn(controller_name) %>
  </section>
</section>

<div class="card card-default">
  <div class="table-responsive">
    <table class="table table-hover" width="100%">
      <thead class="thead-light">
        <tr>
          <th scope="col">#</th>
          <th scope="col"><%= sort_link @search, :name, "Name" %></th>
          <th scope="col"><%= sort_link @search, :short_name, "Short Name" %></th>
          <th scope="col"><%= sort_link @search, :address1, "Address 1" %></th>
          <th scope="col"><%= sort_link @search, :address2, "Address 2" %></th>
          <th scope="col"><%= sort_link @search, :city, "City" %></th>
          <th scope="col"><%= sort_link @search, :state, "State" %></th>
          <th scope="col"><%= sort_link @search, :country, "Country" %></th>
          <th scope="col"><%= sort_link @search, :phone_number, "Phone Number" %></th>
          <th scope="col"><%= sort_link @search, :archive, "Status" %></th>
          <th scope="col" class="text-center">Actions</th>
        </tr>
      </thead>

      <tbody>
        <% @companies.each.with_index(1) do |company, index| %>
          <tr>
            <td scope="row"><%= index %></td>
            <td><%= company.name %></td>
            <td><%= company.short_name %></td>
            <td><%= company.address1 %></td>
            <td><%= company.address2 %></td>
            <td><%= company.city %></td>
            <td><%= company.state %></td>
            <td><%= company.country %></td>
            <td><%= company.phone_number %></td>
            <td><%= archive_status(company.archive).html_safe %></td>
            <td class="text-center">
              <div class="dropdown">
                <a class="dropdown-toggle icon-burger-mini" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown"></a>

                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
                  <%= edit_link_using_modal(controller_name, company) %>
                  <%= change_logs_link_using_modal(controller_name, company) %>
                </div>
              </div>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<%= render "shared/pagy" %>
<%= render "filter_form" %>
<%= render "shared/form_modal_container" %>
