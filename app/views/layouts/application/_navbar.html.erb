<header class="main-header" id="header">
  <nav class="navbar navbar-expand-lg navbar-light" id="navbar">
    <button id="sidebar-toggler" class="sidebar-toggle">
      <span class="sr-only">Toggle navigation</span>
    </button>

    <span class="page-title"><%= yield(:page_title) %></span>

    <div class="navbar-right">
      <ul class="nav navbar-nav">
        <li class="custom-dropdown">
          <button class="notify-toggler custom-dropdown-toggler">
            <i class="mdi mdi-bell-outline icon"></i>
            <span class="badge badge-xs rounded-circle"><%= current_user.notifications.length %></span>
          </button>
          <div class="dropdown-notify">

            <header>
              <div class="nav nav-underline" id="nav-tab" role="tablist">
                <a class="nav-item nav-link" id="message-tab" data-toggle="tab" href="#message" role="tab" aria-controls="nav-profile"
                  aria-selected="false">Msg(<%= current_user.notifications.length %>)</a>
              </div>

              <% current_user.notifications.order_by_date.each do |notify| %>
                <div class="tab-pane" id="message" role="tabpanel" aria-labelledby="message-tab">
                  <div class="media media-sm p-4 mb-0">
                    <div class="media-body">
                      <%= notify.user.email %> <%= notify.action %>
                    </div>
                  </div>
                </div>
              <% end %>
            </header>
          </div>
        </li>

        <li class="dropdown user-menu">
          <button class="dropdown-toggle nav-link" data-toggle="dropdown">
            <span class="user-image rounded-circle user-initial"><%= current_user.initial %></span>
            <span class="d-none d-lg-inline-block"><%= current_user.full_name %></span>
          </button>

          <ul class="dropdown-menu dropdown-menu-right">
            <li>
              <%= link_to edit_user_registration_path, class: "dropdown-link-item" do %>
                <i class="mdi mdi-settings"></i>
                <span class="nav-text">Account Setting</span>
              <% end %>
            </li>

            <li class="dropdown-footer">
              <%= link_to destroy_user_session_path, method: :delete, class: "dropdown-link-item" do %>
                <i class="mdi mdi-logout"></i>
                <span class="nav-text">Log Out</span>
              <% end %>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>
</header>
